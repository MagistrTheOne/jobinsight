# –°–∏—Å—Ç–µ–º–∞ –æ–ø–ª–∞—Ç—ã JobInsight

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ (Polar)

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Polar:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Start Free Trial" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Pricing
   - –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç GET –∑–∞–ø—Ä–æ—Å –Ω–∞ `/api/checkout?products={PRODUCT_ID}`
   - Polar SDK —Å–æ–∑–¥–∞–µ—Ç checkout —Å–µ—Å—Å–∏—é –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã Polar

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç —á–µ—Ä–µ–∑ Polar (Stripe, PayPal –∏ –¥—Ä.)
   - –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã Polar –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ `/api/webhooks/polar`

3. **Webhook —Å–æ–±—ã—Ç–∏—è:**
   - `checkout.succeeded` - –Ω–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞
   - `subscription.updated` - –ø–æ–¥–ø–∏—Å–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–¥–ª–µ–Ω–∞)
   - `subscription.cancelled` - –ø–æ–¥–ø–∏—Å–∫–∞ –æ—Ç–º–µ–Ω–µ–Ω–∞

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –ë–î:**
   - Webhook –Ω–∞—Ö–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email
   - –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `subscriptions`
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç `polarCustomerId` –∏ `polarSubscriptionId` –¥–ª—è —Å–≤—è–∑–∏

5. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ `checkUsageLimit()`
   - Pro/Enterprise –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–º–µ—é—Ç –±–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø
   - Free –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã (5 –∞–Ω–∞–ª–∏–∑–æ–≤ —Ä–µ–∑—é–º–µ, 5 –≤–∞–∫–∞–Ω—Å–∏–π, 2 –ø–∏—Å—å–º–∞)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:

```typescript
subscriptions {
  id: UUID
  userId: UUID (unique)
  plan: "free" | "pro" | "enterprise"
  status: "active" | "cancelled" | "expired"
  polarCustomerId: string | null
  polarSubscriptionId: string | null
  currentPeriodStart: Date | null
  currentPeriodEnd: Date | null
}
```

---

## üá∑üá∫ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º–∏ –±–∞–Ω–∫–∞–º–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ä–µ—à–µ–Ω–∏—è:

1. **–ÆKassa (–Ø–Ω–¥–µ–∫—Å.–ö–∞—Å—Å–∞)** - ‚úÖ –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –±–∞–Ω–∫–∏ –†–§
   - –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (–ø–æ–¥–ø–∏—Å–∫–∏)
   - –í–æ–∑–≤—Ä–∞—Ç—ã
   - Webhooks –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

2. **CloudPayments**
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
   - –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

3. **–¢–∏–Ω—å–∫–æ—Ñ—Ñ Pay**
   - –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API –æ—Ç –¢–∏–Ω—å–∫–æ—Ñ—Ñ
   - –ü—Ä—è–º–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±–µ–∑ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤

### –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

1. –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—Ö–µ–º—É –ë–î –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å–∏—Å—Ç–µ–º
2. –°–æ–∑–¥–∞—Ç—å —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π
3. –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã –≤ UI
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å webhook handlers –¥–ª—è –∫–∞–∂–¥–æ–π —Å–∏—Å—Ç–µ–º—ã

